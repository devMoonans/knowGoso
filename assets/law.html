<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대한민국 각 범죄별 대응 형법 조항</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        summary::-webkit-details-marker { display: none; }
        summary { list-style: none; }
        details > summary { padding: 0.75rem 1rem; }
        details[open] > summary .summary-marker-open { display: inline-block; }
        details:not([open]) > summary .summary-marker-closed { display: inline-block; }
        details[open] > summary .summary-marker-closed,
        details:not([open]) > summary .summary-marker-open { display: none; }

        /* 네비게이션 버튼 활성 스타일 */
        .nav-button.active {
            background-color: #EDE9FE; /* purple-100 */
            color: #5B21B6; /* purple-700 */
            font-weight: 600;
        }
        /* 네비게이션 버튼 기본 스타일 (그라데이션 배경용) */
        .nav-button {
            background-color: rgba(255, 255, 255, 0.25); /* white/25 */
            color: white;
        }
        .nav-button:hover {
            background-color: rgba(255, 255, 255, 0.35); /* white/35 */
        }
        .external-link-button {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.5rem 1rem; /* text-sm에 맞는 패딩 */
            border-radius: 0.375rem; /* rounded-md */
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* medium */
            transition: background-color 0.2s ease-in-out;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .external-link-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        .external-link-button svg {
            width: 1em;
            height: 1em;
            margin-left: 0.5em;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 text-white min-h-screen">
    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-5xl">
        <header class="mb-6 text-center">
            <div class="flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-4">
                <h1 class="text-3xl sm:text-4xl font-bold text-white drop-shadow-lg">각 범죄별 형법 조항</h1>
                <a href="https://www.law.go.kr/%EB%B2%95%EB%A0%B9/%ED%98%95%EB%B2%95" target="_blank" rel="noopener noreferrer" class="external-link-button">
                    국가법령정보센터
                    <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" class="w-4 h-4 ml-1"><path d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                </a>
            </div>
        </header>

        <nav id="law-navigation" class="mb-8 flex flex-wrap justify-center gap-2 sm:gap-3 p-2 bg-black/20 backdrop-blur-md rounded-lg shadow-lg">
            </nav>

        <main id="law-content-area" class="space-y-6 bg-black/25 backdrop-blur-lg p-4 sm:p-6 rounded-xl shadow-2xl">
            </main>

        <footer class="mt-12 text-center text-sm text-purple-200/80">
            <p>법제처에서 제공하는 법률 데이터를 기반으로 생성되었습니다. 대한민국 형법의 자세한 내용은 국가법령정보센터를 참고하세요.</p>
        </footer>
    </div>

    <script>

        let lawData = null;

        const lawContentArea = document.getElementById('law-content-area');
        const lawNavigationContainer = document.getElementById('law-navigation');

        /**
         * 법조항을 렌더링하는 헬퍼 함수.
         * @param {string} articleKey - 조항 번호 (사용되지 않지만, 참고용).
         * @param {string} articleValue - 조항 내용 문자열.
         * @param {HTMLElement} parentEl - 조항을 추가할 부모 HTML 요소.
         */
        function renderArticle(articleKey, articleValue, parentEl) {
            const articleDiv = document.createElement('div');

            articleDiv.className = 'p-4 my-2 bg-white text-gray-800 rounded-lg shadow-md border border-gray-300';

            const lines = articleValue.trim().split('\n');
            const titleMatch = lines[0].match(/^(제\d+조(?:의\d+)?\([^)]+\))/);
            let articleTitleText = lines[0].trim();
            let articleContentText = lines.slice(1).join('\n').trim();

            if (titleMatch && titleMatch[1]) {
                articleTitleText = titleMatch[1];
                const restOfFirstLine = lines[0].substring(titleMatch[1].length).trim();
                if (restOfFirstLine) {
                    articleContentText = restOfFirstLine + (articleContentText ? '\n' + articleContentText : '');
                }
            }

            const articleTitleEl = document.createElement('h5');
            // 조항 제목은 파란색 유지
            articleTitleEl.className = 'text-lg font-semibold text-indigo-700 mb-2';
            articleTitleEl.textContent = articleTitleText;
            articleDiv.appendChild(articleTitleEl);

            if (articleContentText) {
                const articleContentEl = document.createElement('div');
                articleContentEl.className = 'text-sm text-gray-700 leading-relaxed'; // 내용 텍스트 색상
                let htmlContent = '';
                const paragraphs = articleContentText.split(/\n\s*\n+/);
                paragraphs.forEach((para, index) => {
                    const trimmedPara = para.trim();
                    if (trimmedPara !== '') {
                        htmlContent += `<p${index > 0 && htmlContent ? ' class="mt-2"' : ''}>${trimmedPara.replace(/\n/g, '<br>')}</p>`;
                    }
                });
                articleContentEl.innerHTML = htmlContent;
                articleDiv.appendChild(articleContentEl);
            }
            parentEl.appendChild(articleDiv);
        }


        function displayLawContent(mainCategoryData, parentContainer) {
            parentContainer.innerHTML = ''; // 이전 내용 초기화

            Object.entries(mainCategoryData).forEach(([mediumCategoryKey, mediumCategoryValue]) => {

                const mediumCategorySectionWrapper = document.createElement('div');
                mediumCategorySectionWrapper.className = 'bg-white/90 backdrop-blur-sm p-4 sm:p-6 rounded-lg shadow-xl mb-8';
                parentContainer.appendChild(mediumCategorySectionWrapper);


                const mediumCategoryContainer = document.createElement('div');
                mediumCategoryContainer.className = 'flex items-center justify-between mb-4 border-b-2 border-indigo-300 pb-3';
                mediumCategorySectionWrapper.appendChild(mediumCategoryContainer);


                const mediumCategoryHeader = document.createElement('h2');
                mediumCategoryHeader.textContent = mediumCategoryKey;

                mediumCategoryHeader.className = 'text-2xl sm:text-3xl font-bold text-indigo-700';
                mediumCategoryContainer.appendChild(mediumCategoryHeader);


                const shortcutButton = document.createElement('button');
                shortcutButton.textContent = '고소장 작성하기';

                shortcutButton.className = 'ml-4 px-4 py-2 text-sm bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-pink-400 focus:ring-opacity-75 shadow-md hover:shadow-lg';
                shortcutButton.onclick = () => {
                    window.location.href = `plaint.html?category=${encodeURIComponent(mediumCategoryKey)}`;
                };
                mediumCategoryContainer.appendChild(shortcutButton);


                const smallCategoriesListContainer = document.createElement('div');
                smallCategoriesListContainer.className = 'space-y-3'; // 내부 패딩은 wrapper가 담당
                mediumCategorySectionWrapper.appendChild(smallCategoriesListContainer);


                Object.entries(mediumCategoryValue).forEach(([smallCategoryKey, smallCategoryValue]) => {

                    const details = document.createElement('details');
                    const summary = document.createElement('summary');


                    details.className = 'bg-indigo-50 rounded-lg shadow-md mb-3 transition-all duration-300 ease-in-out';
                    summary.className = 'cursor-pointer rounded-t-lg hover:bg-indigo-100 font-semibold flex items-center justify-between p-3 sm:p-4 text-lg sm:text-xl text-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-400';

                    const summaryText = document.createElement('span');
                    summaryText.textContent = smallCategoryKey;
                    summary.appendChild(summaryText);


                    const markerContainer = document.createElement('span');
                    const openMarker = document.createElement('span');
                    openMarker.className = 'summary-marker-open text-indigo-500'; openMarker.textContent = '▼';
                    const closedMarker = document.createElement('span');
                    closedMarker.className = 'summary-marker-closed text-indigo-500'; closedMarker.textContent = '▶';
                    markerContainer.appendChild(openMarker); markerContainer.appendChild(closedMarker);
                    summary.appendChild(markerContainer);

                    details.appendChild(summary);

                    const articlesContainer = document.createElement('div');

                    articlesContainer.className = 'p-3 sm:p-4 border-t border-indigo-200 bg-white rounded-b-lg';


                    Object.entries(smallCategoryValue).forEach(([articleKey, articleText]) => {
                        renderArticle(articleKey, articleText, articlesContainer);
                    });
                    details.appendChild(articlesContainer);
                    smallCategoriesListContainer.appendChild(details);
                });
            });
        }

        /**
         * 대분류 네비게이션을 생성합니다.
         * @param {object} data - 전체 법률 데이터.
         */
        function createNavigation(data) {
            lawNavigationContainer.innerHTML = ''; // 네비게이션 바 초기화
            const topLevelKeys = Object.keys(data);

            topLevelKeys.forEach((key, index) => {
                const button = document.createElement('button');
                button.textContent = key;
                // 네비게이션 버튼 스타일 클래스 직접 지정 (기본 상태)
                button.className = 'nav-button px-3 py-2 sm:px-4 sm:py-2 text-sm sm:text-base font-medium rounded-md shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-purple-800 focus:ring-white transition-colors duration-150';
                button.style.backgroundColor = 'rgba(255, 255, 255, 0.25)';
                button.style.color = 'white';

                button.addEventListener('click', () => {
                    lawNavigationContainer.querySelectorAll('.nav-button').forEach(btn => {
                        btn.classList.remove('active');
                        // 비활성 버튼 스타일
                         btn.style.backgroundColor = 'rgba(255, 255, 255, 0.25)';
                         btn.style.color = 'white';
                         btn.style.fontWeight = '500';
                    });
                    button.classList.add('active');
                     // 활성 버튼 스타일
                    button.style.backgroundColor = '#EDE9FE';
                    button.style.color = '#5B21B6';
                    button.style.fontWeight = '600';


                    displayLawContent(data[key], lawContentArea);
                    window.scrollTo(0, 0);
                });
                lawNavigationContainer.appendChild(button);

                if (index === 0) {
                    button.click();
                }
            });
        }

        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // data.json 파일에서 법률 데이터를 가져옵니다.
                const response = await fetch('data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                lawData = await response.json(); // 전역 변수 lawData에 할당

                // lawData가 성공적으로 로드된 후 네비게이션 및 컨텐츠를 생성합니다.
                if (lawData && lawNavigationContainer && lawContentArea) {
                    createNavigation(lawData);
                } else {
                    const container = lawContentArea || document.body;
                    container.innerHTML = '<p class="text-red-500">법률 데이터를 로드했으나, 필수 HTML 요소를 찾을 수 없습니다.</p>';
                    console.error('Required HTML elements not found after fetching data.');
                }
            } catch (error) {
                console.error('Error fetching or parsing law data:', error);
                const container = lawContentArea || document.body;
                container.innerHTML = `<p class="text-red-500">법률 데이터를 불러오는 중 오류가 발생했습니다: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>
